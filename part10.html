<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Making your first Phaser 3 Game - Part 10</title>
  <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
  <style type="text/css">
    body {
      margin: 0;
      text-align: center;
    }
  </style>
</head>

<body>

  <script type="text/javascript">

    var config = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 0 },
          debug: false
        }
      },
      scene: {
        preload: preload,
        create: create,
        update: update
      }
    };


    var game = new Phaser.Game(config);

    var velocity = 200;

    function preload() {
      this.load.image('sky', 'assets/sky.png');

      this.load.image('windyWalkingDownLeftFoot', 'assets/walkingDownLeftFoot.png');
      this.load.image('windyWalkingDownRightFoot', 'assets/walkingDownRightFoot.png');
      this.load.image('windyWalkingLeft', 'assets/walkingLeft.png');
      this.load.image('windyWatchingLeft', 'assets/watchingLeft.png');
      this.load.image('windyWalkingRight', 'assets/walkingRight.png');
      this.load.image('windyWatchingRight', 'assets/watchingRight.png');
      this.load.image('windyWalkingUpLeftFoot', 'assets/walkingUpLeftFoot.png');
      this.load.image('windyWalkingUpRightFoot', 'assets/walkingUpRightFoot.png');


    }

    function create() {
      background = this.add.image(400, 300, 'sky')
      windy = this.physics.add.sprite(400, 300, 'windyWalkingDownRightFoot');
      windy.setScale(1.5);
      cursors = this.input.keyboard.createCursorKeys();
      windy.anims.msPerFrame = 300;
    }

    function update() {
      windy.setVelocity(0); // 모든 속도를 초기화

      // 위쪽 키
      if (cursors.up.isDown) {
        windy.setVelocityY(-velocity);
        if (windy.texture.key == 'windyWalkingUpLeftFoot') windy.setTexture('windyWalkingUpRightFoot');
        else windy.setTexture('windyWalkingUpLeftFoot');
        cursors.down.reset();
        cursors.left.reset();
        cursors.right.reset();
      }

      // 아래쪽 키
      if (cursors.down.isDown) {
        windy.setVelocityY(velocity);
        if (windy.texture.key == 'windyWalkingDownLeftFoot') windy.setTexture('windyWalkingDownRightFoot');
        else windy.setTexture('windyWalkingDownLeftFoot');
        cursors.up.reset();
        cursors.left.reset();
        cursors.right.reset();
      }

      // 왼쪽 키
      if (cursors.left.isDown) {
        windy.setVelocityX(-velocity);
        if (windy.texture.key == 'windyWatchingLeft') windy.setTexture('windyWalkingLeft');
        else windy.setTexture('windyWatchingLeft');
        cursors.right.reset();
        cursors.up.reset();
        cursors.down.reset();
      }

      // 오른쪽 키
      if (cursors.right.isDown) {
        windy.setVelocityX(velocity);
        if (windy.texture.key == 'windyWatchingRight') windy.setTexture('windyWalkingRight');
        else windy.setTexture('windyWatchingRight');
        cursors.left.reset();
        cursors.up.reset();
        cursors.down.reset();
      }

    }

  </script>

</body>

</html>